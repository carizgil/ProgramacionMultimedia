<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="./estilos/estilo.css">
    <link rel="stylesheet" type="text/css" href="./estilos/estiloespecifico.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI/tZ1a9NqO5u73Zz9d6tO/gyGfJlT52JN4XLZ9A=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
        crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/b793e001e3.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXqOOjWo3PR6MVB1C3DlPbGAYi1aI3i3aGwE"
        crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-GLhlTQ8iKu16H4Vq/lL5I1XsfQOp6nO+VlCQz9L3zr6a/cZZBTO6TEZDg1LPe/E" crossorigin="anonymous"></script>

    
    <title>Libros-Audio</title>

    <script>

        function init() {
            var s = document.getElementById("stop");
            var p = document.getElementById("pause");
            var a = document.getElementById("audio");

            console.log("Estamos dentro del init")

            a.addEventListener('loadeddata', actualizarInformacion);
            a.addEventListener('timeupdate', actualizarInformacion);

            stop();
        }

        function play() {
            var s = document.getElementById("stop");
            var p = document.getElementById("pause");
            var a = document.getElementById("audio");
            a.play();
            s.disabled = false;
            p.disabled = false;
        }

        function stop() {
            var s = document.getElementById("stop");
            var p = document.getElementById("pause");
            var a = document.getElementById("audio");
            a.currentTime = "0";
            pause();
            s.disabled = true;
            p.disabled = true;
        }

        function pause() {
            var a = document.getElementById("audio");
            a.pause();
        }

        function subir() {
            var a = document.getElementById("audio");
            a.volume += 0.1;
        }

        function bajar() {
            var a = document.getElementById("audio");
            a.volume -= 0.1;
        }

        function cambiarAudio() {
            var a = document.getElementById("audio");
            var select = document.getElementById("audioSelect");
            var selectedAudio = select.options[select.selectedIndex].value;
            a.src = selectedAudio;
            stop();
        }

        function actualizarInformacion() {
            var a = document.getElementById("audio");
            console.log(a)
            var duracionTotal = a.duration;
            var tiempoRestante = duracionTotal - a.currentTime;
            var ficheroReproduciendo = a.src;
            var estadoReproduccion = a.paused ? 'Pausado' : (a.ended ? 'Finalizado' : 'Iniciado');

            document.getElementById("infoReproduccion").innerHTML =
                '<strong>Duración total:</strong> ' + duracionTotal.toFixed(2) + ' segundos<br>' +
                '<strong>Tiempo restante:</strong> ' + tiempoRestante.toFixed(2) + ' segundos<br>' +
                '<strong>Fichero reproduciendo:</strong> ' + ficheroReproduciendo + '<br>' +
                '<strong>Estado de reproducción:</strong> ' + estadoReproduccion;
        }
    </script>
</head>

<body onload="init()">
    <div class="titulo-audio centrar-contenido">
        <h1>Bienvenido a Libros-Audio</h1>
        <p>Explora nuestra colección de audiolibros y sumérgete en historias sonoras inolvidables. Escucha las
            narrativas cautivadoras de tus libros favoritos mientras disfrutas de la magia de la palabra hablada.
            ¡Descubre un nuevo mundo de lectura con Libros-Audio!</p>
    </div>

    <div class="pagina-audio">
        <div class="elegir-audio">
            <label for="audioSelect">Selecciona un audio:</label>
            <select id="audioSelect" onchange="cambiarAudio()">
                <option value="./audios/elixir1_balzac.mp3">Elixir 1 - Balzac</option>
                <option value="./audios/elprincipito02_exupery.mp3">El Principito 02 - Exupery</option>
                <option value="./audios/esaboca_benedetti.mp3">Es a boca - Benedetti</option>
                <option value="./audios/fardo_dario.mp3">Fardo - Dario</option>
            </select>

            <div id="infoReproduccion"></div>
        </div>

        <div class="reproducir-audio">
                <audio id="audio" controls autoplay></audio>
            <div>
             <button id="play" onclick="play()" class="boton-verde">Play</button>
            <button id="stop" onclick="stop()" class="boton-verde">Stop</button>
            <button id="pause" onclick="pause()" class="boton-verde">Pause</button>
            <button onclick="subir()" class="boton-verde">Increase Volume</button>
            <button onclick="bajar()" class="boton-verde">Decrease Volume</button>
            </div>
            
        </div>
    </div>
    <script>
        init()
    </script>
</body>

</html>
